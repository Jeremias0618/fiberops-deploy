# FiberOps Deploy üöÄ

Repositorio de despliegue automatizado para el sistema **FiberOps 2025**, un sistema de gesti√≥n de infraestructura de fibra √≥ptica desarrollado por Yeremi Tantaraico.

## üìã Descripci√≥n del Proyecto

Este repositorio contiene los scripts de shell y la documentaci√≥n necesaria para desplegar autom√°ticamente el sistema FiberOps en servidores Ubuntu Server 22.04. El depliegue incluye toda la configuraci√≥n del entorno, dependencias y optimizaciones necesarias para el funcionamiento √≥ptimo del sistema.

## üõ†Ô∏è Tecnolog√≠as del Proyecto

### Backend
- **PHP 8.1** - Lenguaje principal del sistema
- **Apache 2.4** - Servidor web
- **PostgreSQL** - Base de datos principal
- **Composer** - Gestor de dependencias PHP

### Extensiones PHP Cr√≠ticas
- `php8.1-mysql` - Conectividad MySQL
- `php8.1-pgsql` - Conectividad PostgreSQL
- `php8.1-ssh2` - Protocolo SSH para gesti√≥n remota
- `php8.1-snmp` - Protocolo SNMP para monitoreo de equipos
- `php8.1-gd` - Manipulaci√≥n de im√°genes
- `php8.1-mbstring` - Soporte multibyte
- `php8.1-curl` - Cliente HTTP
- `php8.1-xml` - Procesamiento XML
- `php8.1-intl` - Internacionalizaci√≥n
- `php8.1-zip` - Compresi√≥n de archivos
- `php8.1-bcmath` - Matem√°ticas de precisi√≥n

### Dependencias del Sistema
- **SNMP** - Monitoreo de equipos de red
- **PostgreSQL** - Base de datos
- **Python 3** - Scripts auxiliares
- **psycopg2** - Conector PostgreSQL para Python

## üì¶ Requisitos del Sistema

### Hardware M√≠nimo
- **CPU**: 2 cores
- **RAM**: 4GB m√≠nimo, 8GB recomendado
- **Disco**: 20GB libres
- **Red**: Conexi√≥n estable a internet

### Software Base
- **Sistema Operativo**: Ubuntu Server 22.04 LTS
- **Usuario**: Ejecutar como root o con permisos sudo
- **Acceso**: SSH habilitado

## üöÄ Scripts de Despliegue

### Archivo: `fiberops_deploy.sh`

Script automatizado que instala y configura todo el entorno necesario para FiberOps.

### Archivo: `verify_fiberops_installation.sh`

Script de verificaci√≥n completo que valida toda la instalaci√≥n del sistema FiberOps, incluyendo servicios, extensiones PHP, configuraciones y dependencias.

### Archivo: `fiberops_system_monitor.sh`

Script de monitoreo en tiempo real del sistema que verifica el rendimiento, uso de recursos, estado de servicios y caracter√≠sticas del hardware del servidor.

### Archivo: `fiberops_removing_notifications.sh`

Script de configuraci√≥n autom√°tica de crontab para el sistema SMS de FiberOps, que programa tareas autom√°ticas para el procesamiento de notificaciones, limpieza de logs y mantenimiento del sistema.

### Archivo: `fiberops_setup_zabbix_cron.sh`

Script de configuraci√≥n autom√°tica de crontab para el sistema Zabbix de FiberOps, que programa tareas autom√°ticas para la recopilaci√≥n de estad√≠sticas, optimizaci√≥n de archivos y mantenimiento del sistema de monitoreo.

### Archivo: `fiberops_htaccess.sh`

Script de configuraci√≥n autom√°tica de Apache para habilitar el uso del archivo `.htaccess` existente en FiberOps, que configura los m√≥dulos necesarios y las directivas de Apache para procesar las reglas de seguridad.

#### Funcionalidades Principales

1. **Pre-requisitos del Sistema**
   - Deshabilitaci√≥n de IPv6 para evitar problemas de descarga
   - Actualizaci√≥n completa del sistema

2. **Instalaci√≥n de Servicios**
   - Apache 2.4 con m√≥dulos necesarios
   - PHP 8.1 con todas las extensiones requeridas
   - PostgreSQL con extensiones

3. **Configuraci√≥n de Extensiones Especializadas**
   - SSH2 para gesti√≥n remota de equipos
   - SNMP para monitoreo de infraestructura
   - Extensiones de base de datos

4. **Optimizaci√≥n del Entorno**
   - Configuraci√≥n PHP optimizada para FiberOps
   - Zona horaria configurada a Am√©rica/Lima
   - Permisos de directorios configurados

5. **Verificaci√≥n y Validaci√≥n**
   - Estado de servicios
   - Versiones instaladas
   - Extensiones PHP activas
   - Permisos de directorios

## üìñ C√≥mo Usar el Script

### 1. Preparaci√≥n del Servidor
```bash
# Conectar por SSH al servidor Ubuntu 22.04
ssh usuario@tu-servidor-ip

# Actualizar el sistema (opcional, el script lo hace autom√°ticamente)
sudo apt update && sudo apt upgrade -y
```

### 2. Descarga y Ejecuci√≥n
```bash
# Descargar el script de instalaci√≥n
wget https://raw.githubusercontent.com/Jeremias0618/fiberops-deploy/main/fiberops_deploy.sh

# Descargar el script de verificaci√≥n
wget https://raw.githubusercontent.com/Jeremias0618/fiberops-deploy/main/verify_fiberops_installation.sh

# Descargar el script de monitoreo
wget https://raw.githubusercontent.com/Jeremias0618/fiberops-deploy/main/fiberops_system_monitor.sh

# Descargar el script de configuraci√≥n crontab SMS
wget https://raw.githubusercontent.com/Jeremias0618/fiberops-deploy/main/fiberops_removing_notifications.sh

# Descargar el script de configuraci√≥n crontab Zabbix
wget https://raw.githubusercontent.com/Jeremias0618/fiberops-deploy/main/fiberops_setup_zabbix_cron.sh

# Descargar el script de configuraci√≥n Apache .htaccess
wget https://raw.githubusercontent.com/Jeremias0618/fiberops-deploy/main/fiberops_htaccess.sh

# Dar permisos de ejecuci√≥n
chmod +x fiberops_deploy.sh verify_fiberops_installation.sh fiberops_system_monitor.sh fiberops_removing_notifications.sh fiberops_setup_zabbix_cron.sh fiberops_htaccess.sh

# Ejecutar instalaci√≥n como root
sudo ./fiberops_deploy.sh

# Despu√©s de la instalaci√≥n, verificar el sistema
sudo ./verify_fiberops_installation.sh

# Monitorear el sistema en tiempo real
sudo ./fiberops_system_monitor.sh

# Configurar tareas autom√°ticas para SMS
sudo ./fiberops_removing_notifications.sh

# Configurar tareas autom√°ticas para Zabbix
sudo ./fiberops_setup_zabbix_cron.sh

# Configurar Apache para usar .htaccess
sudo ./fiberops_htaccess.sh
```

### 3. Proceso de Instalaci√≥n
El script ejecutar√° autom√°ticamente:
- Instalaci√≥n de Apache, PHP 8.1, PostgreSQL
- Configuraci√≥n de extensiones PHP especializadas
- Instalaci√≥n de Composer
- Configuraci√≥n de zona horaria
- Optimizaci√≥n de PHP.ini
- Verificaci√≥n final del sistema

**Tiempo estimado**: 15-20 minutos dependiendo de la velocidad de internet.

## üìä Resultados de la Instalaci√≥n

### Servicios Instalados y Configurados
- ‚úÖ **Apache 2.4** - Servidor web activo y configurado
- ‚úÖ **PHP 8.1** - Con todas las extensiones necesarias
- ‚úÖ **PostgreSQL** - Base de datos lista para usar
- ‚úÖ **Composer** - Gestor de dependencias PHP
- ‚úÖ **SNMP** - Para monitoreo de equipos
- ‚úÖ **SSH2** - Para gesti√≥n remota

### Directorios Creados
```
/var/www/html/          # Directorio principal del proyecto
/var/www/html/logs/     # Directorio de logs (permisos 777)
```

### Configuraciones Aplicadas
- **Zona horaria**: America/Lima (Per√∫)
- **PHP.ini optimizado**:
  - `max_execution_time = 300`
  - `memory_limit = 512M`
  - `upload_max_filesize = 100M`
  - `post_max_size = 100M`
- **Permisos**: 777 para /var/www/html/

### Acceso al Sistema
- **URL**: `http://tu-servidor-ip/`
- **Directorio**: `/var/www/html/`

## üîß Pr√≥ximos Pasos Despu√©s de la Instalaci√≥n

1. **Subir el c√≥digo de FiberOps**
   ```bash
   # Copiar archivos del proyecto a /var/www/html/
   cp -r /ruta/al/codigo/fiberops/* /var/www/html/
   ```

2. **Configurar base de datos PostgreSQL**
   ```bash
   # Crear usuario y base de datos
   sudo -u postgres createuser --interactive
   sudo -u postgres createdb fiberops_db
   ```

3. **Configurar archivos de entorno**
   - Configurar `.env` con datos de conexi√≥n
   - Ajustar `config.php` seg√∫n necesidades

4. **Instalar dependencias del proyecto**
   ```bash
   cd /var/www/html/
   composer install
   ```

5. **Verificar permisos finales**
   ```bash
   chown -R www-data:www-data /var/www/html/
   chmod -R 755 /var/www/html/
   ```

## üîç Verificaci√≥n del Sistema

### Script de Verificaci√≥n Autom√°tica
```bash
# Ejecutar verificaci√≥n completa del sistema
sudo ./verify_fiberops_installation.sh
```

El script de verificaci√≥n realizar√° **11 categor√≠as de verificaci√≥n**:

1. **Servicios del Sistema** - Apache2 y PostgreSQL
2. **Versiones de Software** - PHP, Apache, PostgreSQL, Composer
3. **Extensiones PHP Requeridas** - SSH2, SNMP, PostgreSQL, GD, etc.
4. **Configuraci√≥n PHP** - Zona horaria, memory limit, execution time
5. **M√≥dulos Apache** - Rewrite, Headers, PHP 8.1
6. **Directorios y Permisos** - /var/www/html/, logs, permisos
7. **Herramientas SNMP** - SNMP tools, Python3, psycopg2
8. **Composer y Dependencias** - Autoloader, dependencias del proyecto
9. **Conectividad y Puertos** - Puerto 80 (HTTP), 5432 (PostgreSQL)
10. **Configuraci√≥n del Sistema** - Zona horaria, IPv6
11. **Configuraci√≥n de Crontab** - Configuraci√≥n autom√°tica de tareas programadas

### Comandos de Verificaci√≥n Manual
```bash
# Estado de servicios
systemctl status apache2
systemctl status postgresql

# Versiones instaladas
php -v
composer --version
apache2 -v

# Extensiones PHP activas
php -m | grep -E "(ssh2|snmp|pgsql|gd|mbstring)"

# Verificar permisos
ls -la /var/www/html/
```

### Resultados de la Verificaci√≥n
El script proporciona un **resumen estad√≠stico** con:
- Total de verificaciones realizadas
- N√∫mero de verificaciones exitosas
- Advertencias encontradas
- Errores detectados
- Estado general del sistema

## üìä Monitoreo del Sistema

### Script de Monitoreo en Tiempo Real
```bash
# Monitoreo completo una vez
sudo ./fiberops_system_monitor.sh

# Monitoreo continuo (cada 5 segundos)
sudo ./fiberops_system_monitor.sh -c 5

# Mostrar ayuda
sudo ./fiberops_system_monitor.sh -h
```

### Caracter√≠sticas del Monitoreo
El script `fiberops_system_monitor.sh` proporciona:

#### üñ•Ô∏è **Informaci√≥n del Sistema**
- Hostname, OS, Kernel, Uptime
- Load Average y fecha actual
- Informaci√≥n detallada del hardware

#### üîß **Monitoreo de Hardware**
- **Procesador**: Modelo, arquitectura, cores, frecuencia
- **Memoria RAM**: Total, usada, libre, disponible, porcentaje de uso
- **Almacenamiento**: Tama√±o, uso, disponible por dispositivo

#### üìä **An√°lisis de Rendimiento**
- **CPU**: Uso actual con barras de progreso por core
- **Memoria**: Detalles de RAM y swap
- **Procesos**: Top 10 procesos por CPU y memoria
- **Temperatura**: Monitoreo de temperatura del CPU

#### üåê **Red y Conectividad**
- Interfaces de red activas
- Estad√≠sticas de tr√°fico (RX/TX)
- Conexiones activas (establecidas, escuchando)
- Top 5 IPs con m√°s conexiones

#### üîß **Servicios FiberOps**
- Estado de Apache2, PostgreSQL, Cron, SSH
- Verificaci√≥n de puertos (80, 443, 5432, 22)
- Uso de memoria por servicio

#### ‚ö†Ô∏è **Alertas Autom√°ticas**
- **CPU**: Alerta si uso > 80%
- **Memoria**: Alerta si uso > 85%
- **Disco**: Alerta si uso > 90%
- **Temperatura**: Alerta si > 80¬∞C

#### üìà **Reportes y Logging**
- Resumen de rendimiento del sistema
- Logging autom√°tico en `/var/log/fiberops_monitor.log`
- Estado general con contador de alertas
- M√©tricas hist√≥ricas para an√°lisis

## ‚è∞ Configuraci√≥n de Tareas Autom√°ticas (Crontab SMS)

### Script de Configuraci√≥n Autom√°tica
```bash
# Configurar tareas autom√°ticas para sistema SMS
sudo ./fiberops_removing_notifications.sh
```

### ¬øQu√© hace el script?
El script `fiberops_removing_notifications.sh` configura autom√°ticamente las tareas programadas (crontab) necesarias para el funcionamiento del sistema SMS de FiberOps.

### Funcionalidades del Script

#### üïí **Tareas Programadas Configuradas**
1. **Limpieza de Notificaciones** - Diaria a las 23:59
   - Ejecuta: `clear_notifications.php`
   - Log: `cleanup.log`

2. **Procesamiento de Cola SMS** - Cada 5 minutos
   - Ejecuta: `process_queue.php`
   - Log: `queue.log`

3. **Reintento de SMS Fallidos** - Cada 30 minutos
   - Ejecuta: `retry_failed.php`
   - Log: `retry.log`

4. **Generaci√≥n de Estad√≠sticas** - Diaria a las 06:00
   - Ejecuta: `stats_generator.php`
   - Log: `stats.log`

5. **Limpieza de Logs Antiguos** - Domingos a las 02:00
   - Ejecuta: `cleanup_old_logs.php`
   - Log: `maintenance.log`

6. **Verificaci√≥n de Salud SMS** - Cada hora
   - Ejecuta: `health_check.php`
   - Log: `health.log`

7. **Respaldo de Configuraciones** - Diario a las 03:00
   - Ejecuta: `backup_config.php`
   - Log: `backup.log`

#### üîß **Caracter√≠sticas del Script**
- **Backup Autom√°tico**: Crea respaldo del crontab existente
- **Verificaci√≥n de Directorios**: Crea directorios SMS si no existen
- **Creaci√≥n de Logs**: Genera archivos de log autom√°ticamente
- **Verificaci√≥n de Servicios**: Asegura que el servicio cron est√© activo
- **Validaci√≥n de PHP**: Verifica que PHP est√© disponible
- **Mensajes Informativos**: Proporciona feedback detallado del proceso

#### üìÅ **Estructura de Directorios Creados**
```
/var/www/html/sms/
‚îú‚îÄ‚îÄ scripts/          # Scripts PHP para tareas autom√°ticas
‚îú‚îÄ‚îÄ logs/            # Archivos de log de las tareas
‚îÇ   ‚îú‚îÄ‚îÄ cleanup.log
‚îÇ   ‚îú‚îÄ‚îÄ queue.log
‚îÇ   ‚îú‚îÄ‚îÄ retry.log
‚îÇ   ‚îú‚îÄ‚îÄ stats.log
‚îÇ   ‚îú‚îÄ‚îÄ maintenance.log
‚îÇ   ‚îú‚îÄ‚îÄ health.log
‚îÇ   ‚îî‚îÄ‚îÄ backup.log
‚îî‚îÄ‚îÄ clear_notifications.php  # Script principal de limpieza
```

#### üéØ **C√≥mo Funciona**
1. **Verificaci√≥n**: Comprueba permisos root y dependencias
2. **Backup**: Crea respaldo del crontab actual
3. **Configuraci√≥n**: Agrega tareas SMS al crontab
4. **Validaci√≥n**: Verifica que las tareas se agregaron correctamente
5. **Preparaci√≥n**: Crea directorios y archivos de log necesarios
6. **Verificaci√≥n Final**: Confirma que el servicio cron est√© activo

#### üìã **Comandos √ötiles Despu√©s de la Configuraci√≥n**
```bash
# Ver tareas programadas configuradas
crontab -l

# Editar tareas programadas manualmente
crontab -e

# Verificar estado del servicio cron
systemctl status cron

# Ver logs de las tareas autom√°ticas
tail -f /var/www/html/sms/logs/cleanup.log
tail -f /var/www/html/sms/logs/queue.log

# Verificar ejecuci√≥n de tareas
grep CRON /var/log/syslog | tail -10
```

#### ‚ö†Ô∏è **Requisitos**
- Ejecutar como root o con permisos sudo
- PHP instalado y disponible en `/usr/bin/php`
- Servicio cron instalado y activo
- Acceso de escritura a `/var/www/html/sms/`

## üìä Configuraci√≥n de Tareas Autom√°ticas (Crontab Zabbix)

### Script de Configuraci√≥n Autom√°tica
```bash
# Configurar tareas autom√°ticas para sistema Zabbix
sudo ./fiberops_setup_zabbix_cron.sh
```

### ¬øQu√© hace el script?
El script `fiberops_setup_zabbix_cron.sh` configura autom√°ticamente las tareas programadas (crontab) necesarias para el funcionamiento del sistema de monitoreo Zabbix de FiberOps.

### Funcionalidades del Script

#### üïí **Tareas Programadas Configuradas**
1. **Recopilaci√≥n de Estad√≠sticas** - Cada minuto (ejecuta cada 3 segundos)
   - Ejecuta: `get_events_data.php`
   - Log: `zabbix_collection.log`
   - Frecuencia: Cada 3 segundos durante 1 minuto

2. **Optimizaci√≥n de Archivos** - Diaria a las 02:00
   - Ejecuta: `fix_current_stats.php`
   - Log: `optimization.log`
   - Funci√≥n: Optimiza archivos JSON grandes

3. **Limpieza de Archivos Obsoletos** - Domingos a las 03:00
   - Ejecuta: `cleanup_large_files.php`
   - Log: `cleanup.log`
   - Funci√≥n: Limpia archivos antiguos y grandes

4. **Verificaci√≥n de Salud del Sistema** - Cada 6 horas
   - Ejecuta: `health_check.php`
   - Log: `health.log`
   - Funci√≥n: Verifica el estado del sistema Zabbix

#### üîß **Caracter√≠sticas del Script**
- **Backup Autom√°tico**: Crea respaldo del crontab existente
- **Verificaci√≥n de Directorios**: Crea directorios Zabbix si no existen
- **Creaci√≥n de Logs**: Genera archivos de log autom√°ticamente
- **Verificaci√≥n de Servicios**: Asegura que el servicio cron est√© activo
- **Validaci√≥n de PHP**: Verifica que PHP est√© disponible
- **Gesti√≥n Inteligente**: Maneja archivos JSON y logs de manera eficiente

#### üìÅ **Estructura de Directorios Creados**
```
/var/www/html/zabbix/
‚îú‚îÄ‚îÄ statistics/              # Directorio de estad√≠sticas
‚îÇ   ‚îú‚îÄ‚îÄ zabbix_collection.log    # Log de recopilaci√≥n
‚îÇ   ‚îú‚îÄ‚îÄ optimization.log         # Log de optimizaci√≥n
‚îÇ   ‚îú‚îÄ‚îÄ cleanup.log              # Log de limpieza
‚îÇ   ‚îú‚îÄ‚îÄ health.log               # Log de salud del sistema
‚îÇ   ‚îú‚îÄ‚îÄ stats_YYYY-MM-DD.json    # Datos detallados del d√≠a
‚îÇ   ‚îú‚îÄ‚îÄ hourly_YYYY-MM-DD.json   # Resumen por horas
‚îÇ   ‚îî‚îÄ‚îÄ events_log_YYYY-MM-DD.txt # Log de texto (backup)
‚îú‚îÄ‚îÄ get_events_data.php      # Script principal de recopilaci√≥n
‚îú‚îÄ‚îÄ fix_current_stats.php    # Script de optimizaci√≥n
‚îú‚îÄ‚îÄ cleanup_large_files.php  # Script de limpieza
‚îî‚îÄ‚îÄ health_check.php         # Script de verificaci√≥n de salud
```

#### üéØ **C√≥mo Funciona**
1. **Verificaci√≥n**: Comprueba permisos root y dependencias
2. **Backup**: Crea respaldo del crontab actual
3. **Configuraci√≥n**: Agrega tareas Zabbix al crontab
4. **Validaci√≥n**: Verifica que las tareas se agregaron correctamente
5. **Preparaci√≥n**: Crea directorios y archivos de log necesarios
6. **Verificaci√≥n Final**: Confirma que el servicio cron est√© activo

#### üìä **Funcionalidades del Sistema Zabbix**
- **Recopilaci√≥n Autom√°tica**: Cada 3 segundos durante 1 minuto
- **Almacenamiento M√∫ltiple**: JSON detallado + TXT backup
- **Optimizaci√≥n Inteligente**: Reduce archivos grandes autom√°ticamente
- **Visualizaci√≥n en Tiempo Real**: Gr√°ficas interactivas
- **Estad√≠sticas por Per√≠odos**: Horas, d√≠as, semanas, meses

#### üìã **Comandos √ötiles Despu√©s de la Configuraci√≥n**
```bash
# Ver tareas programadas configuradas
crontab -l

# Ver logs en tiempo real
tail -f /var/www/html/zabbix/statistics/events_log_$(date +%Y-%m-%d).txt

# Verificar archivos JSON generados
ls -la /var/www/html/zabbix/statistics/

# Ver estad√≠sticas en vivo
curl http://localhost/zabbix/statistics.php

# Ejecutar optimizaci√≥n manual
cd /var/www/html/zabbix && php fix_current_stats.php

# Ejecutar limpieza manual
cd /var/www/html/zabbix && php cleanup_large_files.php
```

#### üìà **Archivos Generados**
- **`stats_YYYY-MM-DD.json`**: Datos detallados (m√°ximo 1440 entradas/d√≠a)
- **`hourly_YYYY-MM-DD.json`**: Resumen por horas con hashes √∫nicos
- **`events_log_YYYY-MM-DD.txt`**: Log de texto para backup
- **Logs del sistema**: Collection, optimization, cleanup, health

#### ‚ö†Ô∏è **Requisitos**
- Ejecutar como root o con permisos sudo
- PHP instalado y disponible en `/usr/bin/php`
- Servicio cron instalado y activo
- Acceso de escritura a `/var/www/html/zabbix/`
- Archivo `get_events_data.php` en el directorio Zabbix

#### üîß **Mantenimiento**
- **Optimizaci√≥n**: Se ejecuta autom√°ticamente diariamente
- **Limpieza**: Se ejecuta autom√°ticamente semanalmente
- **Monitoreo**: Verificaci√≥n de salud cada 6 horas
- **Logs**: Rotaci√≥n autom√°tica y gesti√≥n de espacio

## üîí Configuraci√≥n de Apache para .htaccess

### Script de Configuraci√≥n Autom√°tica
```bash
# Configurar Apache para usar archivo .htaccess existente
sudo ./fiberops_htaccess.sh
```

### ¬øQu√© hace el script?
El script `fiberops_htaccess.sh` configura autom√°ticamente Apache para que pueda procesar y usar el archivo `.htaccess` existente en FiberOps, habilitando todos los m√≥dulos necesarios y configurando las directivas apropiadas.

### Funcionalidades del Script

#### üîß **Configuraciones Aplicadas**
1. **Habilitaci√≥n de M√≥dulos Apache**
   - `mod_rewrite` - Para reglas de reescritura de URL
   - `mod_headers` - Para cabeceras de seguridad HTTP
   - `mod_deflate` - Para compresi√≥n de contenido
   - `mod_expires` - Para gesti√≥n de cach√©

2. **Configuraci√≥n de Directorio**
   - Configura `/var/www/html/` para permitir `.htaccess`
   - Establece `AllowOverride All` para procesar reglas
   - Configura permisos y directivas de seguridad

3. **Verificaci√≥n del Sistema**
   - Comprueba existencia del archivo `.htaccess`
   - Valida instalaci√≥n de Apache
   - Verifica permisos de directorio

#### üõ°Ô∏è **Caracter√≠sticas del Script**
- **Configuraci√≥n Autom√°tica**: Habilita Apache para usar .htaccess
- **Habilitaci√≥n de M√≥dulos**: Activa m√≥dulos necesarios autom√°ticamente
- **Verificaci√≥n de Existencia**: Comprueba si existe el archivo .htaccess
- **Backup de Configuraciones**: Respalda configuraciones Apache existentes
- **Reinicio Autom√°tico**: Reinicia Apache para aplicar cambios
- **Verificaci√≥n de M√≥dulos**: Confirma que los m√≥dulos est√©n habilitados
- **Configuraci√≥n de Permisos**: Establece permisos correctos
- **Mensajes Informativos**: Proporciona feedback detallado del proceso

#### üìÅ **Configuraci√≥n de Apache Aplicada**
```apache
<Directory /var/www/html/>
    Options -Indexes
    AllowOverride All
    Require all granted
</Directory>
```

#### üéØ **C√≥mo Funciona**
1. **Verificaci√≥n**: Comprueba permisos root y existencia de Apache
2. **Detecci√≥n**: Verifica si existe el archivo .htaccess en /var/www/html/
3. **Habilitaci√≥n**: Activa m√≥dulos Apache necesarios
4. **Configuraci√≥n**: Modifica configuraci√≥n de Apache para permitir .htaccess
5. **Reinicio**: Reinicia Apache para aplicar cambios
6. **Verificaci√≥n Final**: Confirma que los m√≥dulos est√©n habilitados

#### üìä **M√≥dulos Habilitados**
- **mod_rewrite**: Para procesar reglas de reescritura del .htaccess
- **mod_headers**: Para aplicar cabeceras de seguridad
- **mod_deflate**: Para compresi√≥n de contenido (opcional)
- **mod_expires**: Para gesti√≥n de cach√© (opcional)

#### üìã **Comandos de Verificaci√≥n Despu√©s de la Configuraci√≥n**
```bash
# Verificar m√≥dulos habilitados
apache2ctl -M | grep -E "(rewrite|headers|deflate|expires)"

# Verificar configuraci√≥n de directorio
grep -A 5 "<Directory /var/www/html/>" /etc/apache2/sites-available/000-default.conf

# Verificar estado de Apache
systemctl status apache2

# Ver logs de Apache
tail -f /var/log/apache2/error.log

# Probar que .htaccess funciona
curl -I http://localhost/
```

#### ‚ö†Ô∏è **Requisitos**
- Ejecutar como root o con permisos sudo
- Apache2 instalado y funcionando
- Archivo .htaccess existente en /var/www/html/ (opcional)
- Acceso de escritura a configuraciones de Apache

#### üîß **Mantenimiento**
- **Verificaci√≥n**: Los m√≥dulos permanecen habilitados despu√©s del reinicio
- **Configuraci√≥n**: La configuraci√≥n de directorio se mantiene
- **Logs**: Revisar logs de Apache si hay problemas con .htaccess
- **Backup**: Configuraciones originales respaldadas autom√°ticamente

#### üö® **Soluci√≥n de Problemas**
```bash
# Si el .htaccess no funciona:
# 1. Verificar m√≥dulos
apache2ctl -M | grep rewrite

# 2. Verificar configuraci√≥n
grep "AllowOverride" /etc/apache2/sites-available/000-default.conf

# 3. Verificar permisos del archivo
ls -la /var/www/html/.htaccess

# 4. Revisar logs de error
tail -f /var/log/apache2/error.log
```

## üìß Soporte

- **Autor**: Yeremi Tantaraico
- **Email**: yeremitantaraico@gmail.com
- **GitHub**: [@Jeremias0618](https://github.com/Jeremias0618)
- **Documentaci√≥n**: [cybercodelabs.com.pe](https://cybercodelabs.com.pe)
- **Versi√≥n del Script**: 2.0 (Corregida)
- **Sistema Objetivo**: Ubuntu Server 22.04

## üìù Notas Importantes

- El script debe ejecutarse como root o con permisos sudo
- Se requiere conexi√≥n a internet estable
- El proceso puede tomar 15-20 minutos
- Se crean respaldos autom√°ticos de configuraciones originales
- Todos los servicios se configuran para iniciar autom√°ticamente

---

**‚ö†Ô∏è Importante**: Este script est√° dise√±ado espec√≠ficamente para Ubuntu Server 22.04. Para otras distribuciones, puede requerir modificaciones.
